datasource db {
    provider    = "mysql"
    url         = env("DB_URL")
}

generator client {
    provider    = "prisma-client-js"
}

model Skill {
    id          Int         @id @default(autoincrement())
    slug        String      @unique
    title       String
    logoUrl     String
    type        SkillType     

    level       SkillLevel  @relation(fields: [levelId], references: [id])
    levelId     Int

    projects    SkillsOnProjects[]
}

enum SkillType {
    FRONT         
    BACK          
    MOBILE        
    SOFTWARE      
    CMS           
    TESTING       
    DEVOPS        
    DESIGN        
    INFRASTRUCTURE
}

model SkillLevel {
    id      Int     @id @default(autoincrement())
    slug    String  @unique
    label   String
    color   String
    skills  Skill[]
}

model Project {
    id                  Int         @id @default(autoincrement())
    slug                String      @unique
    title               String
    description         Json
    shortDescription    String      @db.VarChar(128)
    imageUrl            String
    gitUrl              String
    hostUrl             String
    date                DateTime    @db.Date
    type                ProjectType @default(PERSO)          

    entreprise          Entreprise?  @relation(fields: [entrepriseId], references: [id])
    entrepriseId        Int?         

    skills      SkillsOnProjects[]
}

enum ProjectType {
    PERSO
    PRO
    UNIV
}

model SkillsOnProjects {
    project     Project     @relation(fields: [projectId], references: [id])
    projectId   Int
    skill       Skill       @relation(fields: [skillId], references: [id])
    skillId     Int

    @@id([projectId, skillId])
}

model Entreprise {
    id          Int         @id @default(autoincrement())
    slug        String      @unique
    name        String
    siteUrl     String
    projects    Project[]
}
